{"remainingRequest":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/src/pages/BookEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/src/pages/BookEdit.vue","mtime":1618901933129},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgpjb25zdCBTVE9SQUdFX0tFWSA9ICdib29rcycKCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTonQm9va0VkaXQnLAogIHByb3BzOnsKICAgIGJvb2tzOkFycmF5CiAgfSwKICBkYXRhKCl7CiAgICByZXR1cm57CiAgICAgIGJvb2s6JycsCiAgICAgIGRhdGU6ICcnLAogICAgICBtZW51OiBmYWxzZSwKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgdXBkYXRlQm9va0luZm8oKXsKICAgICAgLy8g5pys44Gu5oOF5aCx44KS5pu05paw44GZ44KLCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJZCk7CiAgICAgIC8vIHNhdmVCb29rc+OBq+OCouOCr+OCu+OCueOBl+OBpuS/neWtmAogICAgICB0aGlzLnNhdmVCb29rcygpCiAgICAgIC8vIOS/neWtmOOBl+OBn+W+jOOBq+ODiOODg+ODl+ODmuODvOOCuOOBq+aIu+OCiwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpCiAgICAgIAogICAgfSwKICAgIHNhdmVCb29rcygpIHsKICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5zdHJpbmdpZnkodGhpcy5ib29rcyk7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFNUT1JBR0VfS0VZLCBwYXJzZWQpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBnZXRTdGF0ZVVzZXIoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnVzZXIKICAgIH0KICB9LAogIGJlZm9yZVJvdXRlRW50ZXIgKHRvLCBmcm9tLCBuZXh0KSB7CiAgbmV4dCh2bSA9PiB7CiAgICAvLyBgdm1gIOOCkumAmuOBmOOBpuOCs+ODs+ODneODvOODjeODs+ODiOOCpOODs+OCueOCv+ODs+OCueOBq+OCouOCr+OCu+OCuQogICAgdm0uJG5leHRUaWNrKCgpPT57CiAgICAgIHZtLmJvb2sgPSB2bS5ib29rc1t2bS4kcm91dGUucGFyYW1zLmlkXQogICAgICBpZih2bS5ib29rLnJlYWREYXRlKXsKICAgICAgICB2bS5kYXRlID0gdm0uYm9vay5yZWFkRGF0ZQogICAgICB9IGVsc2UgewogICAgICAgIHZtLmRhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3Vic3RyKDAsIDEwKQogICAgICB9CiAgICB9KQogIH0pCn0KfQo="},{"version":3,"sources":["BookEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2FA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BookEdit.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <v-row>\n      <v-col cols=\"12\">\n        <v-card class=\"mx-auto\">\n          <v-row>\n            <v-col cols=\"4\">\n              <v-img :src=\"book.image\"></v-img>\n            </v-col>\n            <v-col cols=\"8\">\n              <v-card-title>\n                タイトル：{{ book.title }}\n              </v-card-title>\n              読んだ日：\n              <v-menu\n                v-model=\"menu\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"290px\"\n              >\n              <template v-slot:activator=\"{ on, attrs }\">\n              <v-text-field\n                v-model=\"book.date\"\n                readonly\n                v-bind=\"attrs\"\n                v-on=\"on\"\n              >\n              </v-text-field>\n              </template>\n              <v-date-picker \n                  v-model=\"book.date\" \n                  @input=\"menu = false\"\n                  locale=\"jp-ja\"\n                  :day-format=\"date => new Date(date).getDate()\">\n              </v-date-picker>\n              </v-menu>\n                この本にはどんな情報が書かれているか：<v-textarea\n                  class=\"mx-2\" \n                  v-model=\"book.memo\"\n                  rows=\"3\">\n                  {{ book.memo }}\n              </v-textarea>\n                自分はこの本から何を学んだか：<v-textarea\n                  class=\"mx-2\" \n                  v-model=\"book.learn\"\n                  rows=\"3\">\n                  {{ book.learn }}\n              </v-textarea>\n                この本がなぜ重要なのか：<v-textarea\n                  class=\"mx-2\" \n                  v-model=\"book.important\"\n                  rows=\"3\">\n                  {{ book.important }}\n              </v-textarea>\n                テーマに対しどのような事例を出しているか：<v-textarea\n                  class=\"mx-2\" \n                  v-model=\"book.examples\"\n                  rows=\"3\">\n                  {{ book.examples }}\n              </v-textarea>\n                この本が他の本と似ている所、違う要素は何か：<v-textarea\n                  class=\"mx-2\" \n                  v-model=\"book.different\"\n                  rows=\"3\">\n                  {{ book.different }}\n              </v-textarea>\n              <v-card-actions>\n                <v-btn color=\"secondary\" to=\"/\">一覧に戻る</v-btn>\n                <!-- 投稿した本のuserIdとログイン中のuserIdが同じなら投稿ボタンを表示 -->\n                <v-btn \n                  v-if=\"book.userId === this.$store.state.userId\" \n                  color=\"info\" \n                  @click=\"updateBookInfo\"\n                >\n                投稿する\n                {{ books.userId}}\n                </v-btn>\n                \n              </v-card-actions> \n            </v-col>\n          </v-row>\n        </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\n\nconst STORAGE_KEY = 'books'\n\n\nexport default {\n  name:'BookEdit',\n  props:{\n    books:Array\n  },\n  data(){\n    return{\n      book:'',\n      date: '',\n      menu: false,\n    }\n  },\n  methods:{\n    updateBookInfo(){\n      // 本の情報を更新する\n      console.log(this.$store.state.userId);\n      // saveBooksにアクセスして保存\n      this.saveBooks()\n      // 保存した後にトップページに戻る\n      this.$router.push('/')\n      \n    },\n    saveBooks() {\n      const parsed = JSON.stringify(this.books);\n      localStorage.setItem(STORAGE_KEY, parsed);\n    },\n  },\n  computed: {\n    getStateUser(state) {\n      return state.user\n    }\n  },\n  beforeRouteEnter (to, from, next) {\n  next(vm => {\n    // `vm` を通じてコンポーネントインスタンスにアクセス\n    vm.$nextTick(()=>{\n      vm.book = vm.books[vm.$route.params.id]\n      if(vm.book.readDate){\n        vm.date = vm.book.readDate\n      } else {\n        vm.date = new Date().toISOString().substr(0, 10)\n      }\n    })\n  })\n}\n}\n</script>\n\n<style scoped>\n  .error-message {\n    text-align: center;\n  }\n</style>"]}]}