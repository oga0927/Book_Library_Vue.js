{"remainingRequest":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/src/App.vue","mtime":1616299922450},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/oga0927/Desktop/Book_Library_Vue.js/bookapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnQC9nbG9iYWwvSGVhZGVyJwppbXBvcnQgRm9vdGVyIGZyb20gJ0AvZ2xvYmFsL0Zvb3RlcicKLy8gaW1wb3J0IEhvbWUgZnJvbSAnQC9wYWdlcy9Ib21lLnZ1ZScKY29uc3QgU1RPUkFHRV9LRVkgPSAnYm9va3MnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FwcCcsCgogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlciwKICAgIEZvb3RlciwKICAgIC8vIEhvbWUKICB9LAoKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBib29rczogW10sCiAgICAgIG5ld0Jvb2s6IG51bGwKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICAvLyDjg63jg7zjgqvjg6vjgrnjg4jjg6zjg7zjgrjjgavjgqLjgqTjg4bjg6DjgYzjgYLjgozjgbAKICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSkpIHsKICAgICAgdHJ5IHsKICAgICAgICAvLyBKU09OLnBhcnNl44Gn5YCk44KS5oyB44Gj44Gm44GN44Gm44CBdGhpcy5ib29rc+OBq+ODh+ODvOOCv+OCkua4oeOBmQogICAgICAgIHRoaXMuYm9va3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8gKGUp44Gn5a2Q44Kz44Oz44Od44O844ON44Oz44OI44GL44KJ44OH44O844K/44KS5Y+X44GR5Y+W44KLCiAgICBhZGRCb29rKGUpIHsKICAgICAgCiAgICAgIC8vIOi/veWKoOOBjOOBguOCjOOBsHB1c2jjgZfjgaYKICAgICAgdGhpcy5ib29rcy5wdXNoKHsKICAgICAgICBpZDogdGhpcy5ib29rcy5sZW5ndGgsCiAgICAgICAgLy8g5a2Q44Kz44Oz44Od44O844ON44Oz44OICiAgICAgICAgdGl0bGU6IGUudGl0bGUsCiAgICAgICAgaW1hZ2U6IGUuaW1hZ2UsCiAgICAgICAgLy8g6Kqs5piOCiAgICAgICAgZGlzY3JpcHRpb246IGUuZGlzY3JpcHRpb24sCiAgICAgICAgLy8g6Kqt44KT44Gg5pel44CB5oSf5oOzCiAgICAgICAgcmVhZERhdGU6ICcnLAogICAgICAgIC8vIOODoeODogogICAgICAgIG1lbW86ICcnCiAgICAgIH0pCiAgICAgIC8vIHRoaXMuc2F2ZUJvb2tz44Gr5L+d5a2Y44GZ44KLCiAgICAgIHRoaXMuc2F2ZUJvb2tzKCk7CiAgICAgIC8vIOacgOW+jOOBq+i/veWKoOOBl+OBn2lk5Y+W5b6X44Kz44O844OJCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuYm9va3Muc3BsaWNlKC0xKVswXS5pZCk7CgogICAgICAvLyDmnIDmlrDjga5pZOOBjOWFpeOBo+OBn+eKtuaFiwogICAgICB0aGlzLmdvVG9FZGl0UGFnZSh0aGlzLmJvb2tzLnNsaWNlKC0xKVswXS5pZCkKICAgIH0sCiAgICByZW1vdmVCb29rKHgpIHsKICAgICAgdGhpcy5ib29rcy5zcGxpY2UoeCwgMSk7CiAgICAgIHRoaXMuc2F2ZUJvb2tzKCk7CiAgICB9LAogICAgc2F2ZUJvb2tzKCkgewogICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmJvb2tzKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIHBhcnNlZCk7CiAgICB9LAogICAgdXBkYXRlQm9va0luZm8oZSkgewogICAgICAvLyBib29rOltd44Gu5Lit6Lqr44KS572u44GN5o+b44GI44KL5Yem55CGCiAgICAgIGNvbnN0IHVwZGF0ZUluZm8gPSB7CiAgICAgICAgaWQ6IGUuaWQsCiAgICAgICAgcmVhZERhdGU6IGUucmVhZERhdGUsCiAgICAgICAgbWVtbzogZS5tZW1vLAogICAgICAgIHRpdGxlOiB0aGlzLmJvb2tzW2UuaWRdLnRpdGxlLAogICAgICAgIGltYWdlOiB0aGlzLmJvb2tzW2UuaWRdLmltYWdlLAogICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmJvb2tzW2UuaWRdLmRlc2NyaXB0aW9uCiAgICAgIH0KICAgICAgLy8gZS5pZOOBrjHjgaTnm67jgYznva7jgY3mj5vjgo/jgosKICAgICAgdGhpcy5ib29rcy5zcGxpY2UoZS5pZCwgMSwgdXBkYXRlSW5mbykKICAgICAgLy8gc2F2ZUJvb2tz44Gr44Ki44Kv44K744K544GX44Gm5L+d5a2YCiAgICAgIHRoaXMuc2F2ZUJvb2tzKCkKICAgICAgLy8g5L+d5a2Y44GX44Gf5b6M44Gr44OI44OD44OX44Oa44O844K444Gr5oi744KLCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIH0sCiAgICAvLyDmnIDmlrDjga5pZAogICAgZ29Ub0VkaXRQYWdlKGlkKSB7CiAgICAgIC8vIOODmuODvOOCuOOBruWIh+OCiuabv+OBiAogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL2VkaXQvJHtpZH1gKQogICAgfSwKICAgIGRlbGV0ZUxvY2FsU3RvcmFnZSgpIHsKICAgICAgLy8g44Oh44OD44K744O844K4OuWJiumZpOOBl+OBvuOBmeOBi++8n+OCkui/veWKoAogICAgICAgIGNvbnN0IGlzRGVsZXRlZCA9ICdkZWxldGVMb2NhbFN0b3JhZ2Xjga7jg4fjg7zjgr/jgpLliYrpmaTjgZfjgabjgoLjgYTjgYTjgafjgZnjgYvvvJ8nCiAgICAgICAgaWYod2luZG93LmNvbmZpcm0oaXNEZWxldGVkKSkgewogICAgICAgICAgLy8gMuOBpOebruOBruW8leaVsOOCkuepuuOBq+OBmeOCjOOBsOepuuOBruODh+ODvOOCv+OBp+S4iuabuOOBjeOBleOCjOOCiwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksICcnKTsKICAgICAgICAgIC8vIOWujOWFqOOBq+a2iOOBiOOCiwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oU1RPUkFHRV9LRVkpOwogICAgICAgICAgdGhpcy5ib29rcyA9IFtdCiAgICAgICAgICAvLyBzcGxpY2XjgarjgokgdGhpcy5ib29rcy5zcGxpY2UoMCwgdGhpcy5ib29rcy5sZW5ndGgpCiAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCkKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAmBA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <Header\n      @delete-local-storage=\"deleteLocalStorage\"\n      />\n    <v-main>\n      <!-- App.vueに入れることで自動でcontainerに割り当てられる -->\n      <v-container>\n        <router-view\n        :books=\"books\"\n        @add-book-list=\"addBook\"\n        @update-book-info=\"updateBookInfo\"/>\n      </v-container>\n    </v-main>\n  <Footer/>\n  </v-app>\n</template>\n\n<script>\nimport Header from '@/global/Header'\nimport Footer from '@/global/Footer'\n// import Home from '@/pages/Home.vue'\nconst STORAGE_KEY = 'books'\n\nexport default {\n  name: 'App',\n\n  components: {\n    Header,\n    Footer,\n    // Home\n  },\n\n  data(){\n    return {\n      books: [],\n      newBook: null\n    }\n  },\n  mounted() {\n    // ローカルストレージにアイテムがあれば\n    if (localStorage.getItem(STORAGE_KEY)) {\n      try {\n        // JSON.parseで値を持ってきて、this.booksにデータを渡す\n        this.books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n      } catch(e) {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n  },\n  methods: {\n    // (e)で子コンポーネントからデータを受け取る\n    addBook(e) {\n      \n      // 追加があればpushして\n      this.books.push({\n        id: this.books.length,\n        // 子コンポーネント\n        title: e.title,\n        image: e.image,\n        // 説明\n        discription: e.discription,\n        // 読んだ日、感想\n        readDate: '',\n        // メモ\n        memo: ''\n      })\n      // this.saveBooksに保存する\n      this.saveBooks();\n      // 最後に追加したid取得コード\n      // console.log(this.books.splice(-1)[0].id);\n\n      // 最新のidが入った状態\n      this.goToEditPage(this.books.slice(-1)[0].id)\n    },\n    removeBook(x) {\n      this.books.splice(x, 1);\n      this.saveBooks();\n    },\n    saveBooks() {\n      const parsed = JSON.stringify(this.books);\n      localStorage.setItem(STORAGE_KEY, parsed);\n    },\n    updateBookInfo(e) {\n      // book:[]の中身を置き換える処理\n      const updateInfo = {\n        id: e.id,\n        readDate: e.readDate,\n        memo: e.memo,\n        title: this.books[e.id].title,\n        image: this.books[e.id].image,\n        description: this.books[e.id].description\n      }\n      // e.idの1つ目が置き換わる\n      this.books.splice(e.id, 1, updateInfo)\n      // saveBooksにアクセスして保存\n      this.saveBooks()\n      // 保存した後にトップページに戻る\n      this.$router.push('/')\n    },\n    // 最新のid\n    goToEditPage(id) {\n      // ページの切り替え\n      this.$router.push(`/edit/${id}`)\n    },\n    deleteLocalStorage() {\n      // メッセージ:削除しますか？を追加\n        const isDeleted = 'deleteLocalStorageのデータを削除してもいいですか？'\n        if(window.confirm(isDeleted)) {\n          // 2つ目の引数を空にすれば空のデータで上書きされる\n          localStorage.setItem(STORAGE_KEY, '');\n          // 完全に消える\n          localStorage.removeItem(STORAGE_KEY);\n          this.books = []\n          // spliceなら this.books.splice(0, this.books.length)\n          window.location.reload()\n      }\n    }\n  }\n};\n</script>\n"]}]}